@{
    Layout = "~/Views/Shared/_LayoutGerenciamento.cshtml";
}
<style>
    /* Estilo para a box-container */
    .box-container {
        padding: 30px;
        margin-bottom: 30px;
        background-color: #EAE7DC;
        ;
        border-radius: 8px;
        box-shadow: 0 4px 8px #612846;
        height: auto; /* Ajuste para a altura ser dinâmica */
    }

    /* Estilo para a container da página */
    .container.page-maneger {
        padding: 20px;
        background-color: #612846;
        border-radius: 8px;
        box-shadow: 0 8px 8px pink;
        min-height: 400px; /* Altura mínima para a div */
        height: auto; /* Deixe a altura da div crescer conforme o conteúdo */
        border-top: 4px solid rgb(255, 192, 229);
        ; /* Borda no topo */
    }

    /* Filtro Input e Select */
    .filter-group {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
    }

        .filter-group > div {
            flex: 1;
            margin-right: 10px;
        }

            .filter-group > div:last-child {
                margin-right: 0;
            }

    .filter-input,
    .filter-select {
        width: 100%;
        padding: 12px;
        font-size: 16px;
        border-radius: 5px;
        border: 1px solid black;
        box-sizing: border-box;
        transition: all 0.3s ease;
    }

        .filter-input:focus,
        .filter-select:focus {
            border-color: #612846;
            outline: none;
        }

    /* Botão de pesquisa */
    .btn {
        padding: 12px 25px;
        background-color: hotpink;
        color: #612846;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

        .btn:hover {
            background-color: deeppink;
        }

    /* Estilos para a tabela */

    /* Estilos para a tabela */
    #tabelaAgendamentos {
        margin-top: 20px;
        width: 100%;
        color: black; /* Texto verde */
        background-color: gainsboro; /* Fundo preto para a tabela */
        border-collapse: collapse; /* Garante que as bordas fiquem colapsadas */
        font-family: Arial, sans-serif; /* Fonte mais clean */
    }

        /* Estilo das células da tabela */
        #tabelaAgendamentos th, #tabelaAgendamentos td {
            padding: 12px 15px;
            text-align: left; /* Alinha o texto à esquerda */
            border: 1px solid purple; /* Cor escura nas bordas */
        }

        /* Estilo para os cabeçalhos da tabela */
        #tabelaAgendamentos th {
            background-color: deeppink; /* Fundo escuro para os cabeçalhos */
            color: white; /* Cor verde neon para o texto dos cabeçalhos */
            font-weight: bold;
        }

        /* Estilo para as linhas da tabela (alternando a cor das linhas para facilitar leitura) */
        #tabelaAgendamentos tr:nth-child(even) {
            background-color: pink !important; /* Cor escura para linhas pares */
        }

        #tabelaAgendamentos tr:nth-child(odd) {
            background-color: lightpink !important; /* Cor um pouco mais clara para as linhas ímpares */
        }

        /* Estilo para o foco nos links (caso haja links na tabela) */
        #tabelaAgendamentos a {
            color: dee /* Verde neon para links */
            text-decoration: none; /* Remove o sublinhado */
        }

            #tabelaAgendamentos a:hover {
                text-decoration: underline; /* Sublinha ao passar o mouse */
            }

    /* Estilo para o botão de pesquisa */
    .btn-pesquisar {
        background-color: deeppink; /* Cor verde */
        color: white;
        padding: 8px 16px; /* Diminuir o tamanho do botão */
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

        .btn-pesquisar:hover {
            background-color: rebeccapurple; /* Cor verde mais escura ao passar o mouse */
        }

    /* Estilo para centralizar os botões de exportação */
    .center-buttons {
        text-align: center;
        margin-bottom: 20px; /* Para dar um espaçamento entre os botões e a tabela */
        margin-top: 20px; /* Espaçamento superior para os botões de exportação */
    }

        .center-buttons .btn {
            display: inline-block;
            margin: 0 10px; /* Espaçamento entre os botões */
            background-color: purple /* Cor verde */
            color: padding: 8px 16px; /* Botões menores */
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

            .center-buttons .btn:hover {
                background-color: purple; /* Cor verde mais escura ao passar o mouse */
            }

    /* Adicionando espaçamento entre a tabela e o "Mostrar registros" */
    .dataTables_info {
        margin-top: 20px; /* Espaço superior maior entre a tabela e a contagem */
    }

    #tabelaAgendamentos_filter {
        padding: 2px; /* Espaçamento interno ao redor do campo de filtro */
        border-radius: 2px; /* Borda arredondada */
    }

        #tabelaAgendamentos_filter input {
            border: none; /* Remove a borda do campo de entrada */
            padding: 5px; /* Ajusta o preenchimento interno do campo de entrada */
            color: black; /* Cor do texto no campo */
            background-color: hotpink; /* Cor de fundo preta para o campo de entrada */
        }
    /* Estilo para os botões de exportação */
    .dt-button {
        background-color: hotpink; /* Cor de fundo verde */
        color: black; /* Texto branco */
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        margin: 5px;
        transition: background-color 0.3s ease, transform 0.2s ease;
    }
      
        .dt-button:hover {
            background-color: deeppink; /* Cor verde mais escura ao passar o mouse */
            transform: scale(1.05); /* Aumenta ligeiramente o tamanho do botão */
        }

        /* Estilo específico para o botão de Excel */
        .dt-button.excel-button {
            background-color: #007bff !important;
        }

            .dt-button.excel-button:hover {
                background-color: #0056b3;
            }

        /* Estilo específico para o botão de PDF */
        .dt-button.pdf-button {
            background-color: #dc3545;
        }

            .dt-button.pdf-button:hover {
                background-color: #c82333;
            }

        /* Estilo específico para o botão de Copy */
        .dt-button.copy-button {
            background-color: #ffc107;
        }

            .dt-button.copy-button:hover {
                background-color: #e0a800;
            }

</style>

<body style="background-color: lightpink;">

    <section class="maneger-page-section">
        <div class="container page-maneger">

            <div class="add-user-button">
                <h3 class="section-title cliente-title-maneger" style="color:orchid!important    ">Relatório <i class="fa fa-chart-line"></i></h3>
            </div>
            <section class="home" id="home">
                <div class="filter-group">
                    <div>
                        <label for="campo1" style="color:orchid">Escolha a coluna 1:</label>
                        <select id="campo1" class="filter-select">
                            <option value="" selected disabled>Selecione um campo para filtrar</option>
                            <option value="DataAtendimento">Data do Agendamento</option>
                            <option value="Horario">Horario do Atendimento</option>
                            <option value="TipoServico">Tipo do serviço</option>
                            <option value="Valor">Valor do serviço</option>
                            <option value="Nome">Nome do cliente</option>
                            <option value="Email">Email do cliente</option>
                            <option value="Telefone">Telefone do cliente</option>
                        </select>
                    </div>
                    <div>
                        <label for="valor1" style="color:orchid">Filtro 1:</label>
                        <input type="text" id="valor1" placeholder="Digite o filtro" class="filter-input">
                    </div>
                </div>
                <div class="filter-group">
                    <div>
                        <label for="campo2" style="color:orchid">Escolha a coluna 2:</label>
                        <select id="campo2" class="filter-select">
                            <option value="" selected disabled>Selecione um campo para filtrar</option>
                            <option value="DataAtendimento">Data do Agendamento</option>
                            <option value="Horario">Horario do Atendimento</option>
                            <option value="TipoServico">Tipo do serviço</option>
                            <option value="Valor">Valor do serviço</option>
                            <option value="Nome">Nome do cliente</option>
                            <option value="Email">Email do cliente</option>
                            <option value="Telefone">Telefone do cliente</option>
                        </select>
                    </div>
                    <div>
                        <label for="valor2" style="color:orchid">Filtro 2:</label>
                        <input type="text" id="valor2" placeholder="Digite o filtro" class="filter-input">
                    </div>
                </div>
                <div class="filter-group">
                    <div>
                        <label for="campo3" style="color:orchid">Escolha a coluna 3:</label>
                        <select id="campo3" class="filter-select">
                            <option value="" selected disabled>Selecione um campo para filtrar</option>
                            <option value="DataAtendimento">Data do Agendamento</option>
                            <option value="Horario">Horario do Atendimento</option>
                            <option value="TipoServico">Tipo do serviço</option>
                            <option value="Valor">Valor do serviço</option>
                            <option value="Nome">Nome do cliente</option>
                            <option value="Email">Email do cliente</option>
                            <option value="Telefone">Telefone do cliente</option>
                        </select>
                    </div>
                    <div>
                        <label for="valor3" style="color:orchid">Filtro 3:</label>
                        <input type="text" id="valor3" placeholder="Digite o filtro" class="filter-input">
                    </div>
                </div>
                <button id="pesquisarBtn" class="btn" onclick="filtrarAgendamentos()">Pesquisar</button>

                <!-- Tabela para exibir os agendamentos -->
                <div class="box-container">
                    <table id="tabelaAgendamentos" class="table table-striped"></table>
                </div>
                <br />
            </section>
        </div>
    </section>

    <!-- Inclusão do jQuery e DataTables -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.70/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.pdfMake.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">

    <script>
        function filtrarAgendamentos() {
            var campo1 = $('#campo1').val();
            var campo2 = $('#campo2').val();
            var campo3 = $('#campo3').val();
            var valor1 = $('#valor1').val();
            var valor2 = $('#valor2').val();
            var valor3 = $('#valor3').val();

            console.log(campo1, campo2, campo3, valor1, valor2, valor3);


            // Fazer a requisição AJAX para filtrar os agendamentos
            $.ajax({
                url: '/Relatorio/GetAgendamentos',  // Substitua 'SeuController' pelo nome do seu controller
                type: 'GET',
                data: {
                    campo1: campo1,
                    campo2: campo2,
                    campo3: campo3,
                    valor1: valor1,
                    valor2: valor2,
                    valor3: valor3
                },
                success: function (resultado) {
                    console.log('Resultado:', resultado);  // Verifique o que está sendo retornado
                    if (resultado && resultado.length > 0) {
                        // Inicializa ou reinicializa a tabela com os novos dados
                        $('#tabelaAgendamentos').DataTable({
                            destroy: true,  // Permite reinicializar a tabela ao aplicar novos filtros
                            data: resultado,
                            columns: [
                                { title: 'Data do Agendamento', data: 'dataAtendimento' },
                                { title: 'Horario do Atendimento', data: 'horario' },
                                { title: 'Tipo do Serviço', data: 'tipoServico' },
                                { title: 'Valor do Serviço', data: 'valor' },
                                { title: 'Nome do Cliente', data: 'nome' },
                                { title: 'Email do Cliente', data: 'email' },
                                { title: 'Telefone do Cliente', data: 'telefone' }
                            ],
                            language: {
                                url: 'https://cdn.datatables.net/plug-ins/1.10.21/i18n/Portuguese.json'
                            },
                            dom: '<"left-buttons"B>lfrtip', // Centraliza os botões de exportação

                            initComplete: function () {
                                var api = this.api();
                                api.columns().every(function () {
                                    var column = this;
                                    $(column.header()).css('background-color', 'color:chocolate');
                                    $(column.header()).css('color', '#080000'); // Cabeçalhos
                                });
                            },
                            rowCallback: function (row, data, index) {
                                if (index % 2 === 0) {
                                    $(row).css('background-color', '#fa8d3b'); // Linhas pares com fundo mais escuro
                                } else {
                                    $(row).css('background-color', '#f0a818'); // Linhas ímpares com fundo mais claro
                                }
                            }
                        });
                    } else {
                        alert('Nenhum agendamento encontrado.');
                    }
                },
                error: function (xhr, status, error) {
                    console.error('Erro ao buscar agendamentos:', error);
                }
            });
        }





    </script>
</body>

